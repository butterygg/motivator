specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: Stbc
    network: mainnet
    source:
      address: "0x7F082b435bFF9318f5A8F48593664050fF43518D"
      abi: Stbc
      startBlock: 19372000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TokenBalance
        - TokenBalanceSnapshot
        - TokenSupply
        - TokenSupplySnapshot
      abis:
        - name: Stbc
          file: ./abis/Stbc.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/stbc.ts
  - kind: ethereum
    name: DaoCollateral
    network: mainnet
    source:
      address: "0x85530858CeB7715F99c6E284e63dE3C0b15653e8"
      abi: DaoCollateral
      startBlock: 19372000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Mint
        - Swap
        - Redeem
        - MintVolume
        - MintVolumeSnapshot
      abis:
        - name: DaoCollateral
          file: ./abis/DaoCollateral.json
      eventHandlers:
        - event: SwapRWAForStbcMintEngine(indexed address,indexed address,address,uint256,uint256,uint256)
          handler: handleSwapRWAForStbcMintEngine
        - event: Swap(indexed address,indexed address,uint256,uint256,uint256)
          handler: handleSwap
        - event: Redeem(indexed address,indexed address,uint256,uint256,uint256)
          handler: handleRedeem
      file: ./src/mint-engine.ts
  - kind: ethereum
    name: MintEngineCpOrderbook
    network: mainnet
    source:
      address: "0x59Eb4266885baF67f0A77ddb77fd80f72188CA43"
      abi: MintEngineCpOrderbook
      startBlock: 19372000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - MintEngineOffer
        - MintEngineOfferComponent
        - MintEngineLiquidity
        - MintEngineLiquiditySnapshot
      abis:
        - name: MintEngineCpOrderbook
          file: ./abis/MintEngineCpOrderbook.json
      eventHandlers:
        - event: OfferCreated((uint256,address,uint256,uint256,address,uint8))
          handler: handleOfferCreated
        - event: OfferTaken((uint256,address,uint256,uint256,address,uint8))
          handler: handleOfferTaken
        - event: OfferModified((uint256,address,uint256,uint256,address,uint8))
          handler: handleOfferModified
        - event: OfferCancelled((uint256,address,uint256,uint256,address,uint8))
          handler: handleOfferCancelled
      file: ./src/collateral-providers.ts
  - kind: ethereum
    name: MintEngineMinterPool
    network: mainnet
    source:
      address: "0x7A24682910a11880eb31dF11Fbf771AE87B57575"
      abi: MintEngineMinterPool
      startBlock: 19372000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - MintEngineOffer
        - MintEngineOfferComponent
        - MintEngineLiquidity
        - MintEngineLiquiditySnapshot
      abis:
        - name: MintEngineMinterPool
          file: ./abis/MintEngineMinterPool.json
      eventHandlers:
        - event: Deposit(indexed address,indexed address,indexed uint256,uint256)
          handler: handleDeposit
        - event: Withdraw(indexed address,indexed address,indexed uint256,uint256)
          handler: handleWithdraw
        - event: OfferCreated((uint256,address,uint256,uint256,address,uint8))
          handler: handleOfferCreated
        - event: OfferTaken((uint256,address,uint256,uint256,address,uint8))
          handler: handleOfferTaken
        - event: OfferModified((uint256,address,uint256,uint256,address,uint8))
          handler: handleOfferModified
        - event: OfferCancelled((uint256,address,uint256,uint256,address,uint8))
          handler: handleOfferCancelled
      file: ./src/minter-pool.ts
  - kind: ethereum
    name: LsausUSDFactory
    network: mainnet
    source:
      address: "0xeB7aA97Cb24E7b73Aea8ED7cafF15779fB0FB59a"
      abi: LsausUSDFactory
      startBlock: 19372000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Bond
      abis:
        - name: LsausUSDFactory
          file: ./abis/LsausUSDFactory.json
        - name: LsausUSD
          file: ./abis/LsausUSD.json
      eventHandlers:
        - event: NewBond(indexed string,indexed string,address,uint256)
          handler: handleNewBond
        - event: RemoveBond(indexed address)
          handler: handleRemoveBond
      file: ./src/bonds.ts
  - kind: ethereum
    name: StableSwapNGFactory
    network: mainnet
    source:
      address: "0x6A8cbed756804B16E05E741eDaBd5cB544AE21bf"
      abi: CurveFactory
      startBlock: 19372000
    context:
      stbc:
        type: Bytes
        data: "0x7F082b435bFF9318f5A8F48593664050fF43518D"
      usdc:
        type: Bytes
        data: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"
      lusdao:
        type: Bytes
        data: "0x15023E783F4E7159EF904F4E7C2DC5b1C03eE6a9"
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities: []
      abis:
        - name: CurveFactory
          file: ./abis/CurveFactory.json
        - name: CurveGauge
          file: ./abis/CurveGauge.json
      eventHandlers:
        - event: PlainPoolDeployed(address[],uint256,uint256,address)
          handler: handlePlainPoolDeployed
        - event: LiquidityGaugeDeployed(address,address)
          handler: handleLiquidityGaugeDeployed
      file: ./src/curve-factory.ts
templates:
  - kind: ethereum
    name: LsausUSD
    network: mainnet
    source:
      abi: LsausUSD
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TokenBalance
        - TokenBalanceSnapshot
        - TokenSupply
        - TokenSupplySnapshot
      abis:
        - name: LsausUSD
          file: ./abis/LsausUSD.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/bonds.ts
  - kind: ethereum
    name: CurvePool
    network: mainnet
    source:
      abi: CurvePool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - LpSwap
      abis:
        - name: CurvePool
          file: ./abis/CurvePool.json
      eventHandlers:
        - event: TokenExchange(indexed address,int128,uint256,int128,uint256)
          handler: handleTokenExchange
      file: ./src/curve.ts
  - kind: ethereum
    name: CurveGauge
    network: mainnet
    source:
      abi: CurveGauge
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - LpDeposit
        - TokenBalance
        - TokenBalanceSnapshot
        - TokenSupply
        - TokenSupplySnapshot
      abis:
        - name: CurveGauge
          file: ./abis/CurveGauge.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/curve.ts
  - kind: ethereum
    name: LusDAO
    network: mainnet
    source:
      abi: LusDAO
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - LpRewardsClaim
      abis:
        - name: LusDAO
          file: ./abis/LusDAO.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/lusdao.ts
